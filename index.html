<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Warfarin Dosing Calculator - เครื่องคำนวณการให้ยา Warfarin</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <header>
    <div class="logo">W</div>
    <h1>เครื่องคำนวณการให้ยา Warfarin</h1>
  </header>

  <main>
    <section class="card">
      <form id="doseForm" onsubmit="event.preventDefault(); calculate();">
        <div class="row">
          <div class="col">
            <label>INR ปัจจุบัน</label>
            <input id="inr" type="number" step="0.01" min="0" required value="2.5">
          </div>
          <div class="col">
            <label>ขนาดยา Warfarin ต่อสัปดาห์ (mg)</label>
            <input id="weeklyDose" type="number" step="0.1" min="0" required value="35">
          </div>
          <div class="col">
            <label>จำนวนวันนัด (วัน)</label>
            <input id="days" type="number" step="1" min="1" required value="7">
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label>ชนิดเม็ดที่ใช้</label>
            <div class="radio-row">
              <label class="radio"><input type="radio" name="tablet" value="3" checked> ใช้เม็ด 3 mg เท่านั้น</label>
              <label class="radio"><input type="radio" name="tablet" value="2"> ใช้เม็ด 2 mg เท่านั้น</label>
              <label class="radio"><input type="radio" name="tablet" value="both"> ใช้ทั้ง 2 และ 3 mg</label>
            </div>
          </div>
          <div class="col">
            <label>ภาวะเลือดออก</label>
            <div class="radio-row">
              <label class="radio"><input type="radio" name="bleed" value="no" checked> ไม่มี</label>
              <label class="radio"><input type="radio" name="bleed" value="yes"> มี</label>
            </div>
          </div>
        </div>

        <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
          <button class="primary" type="submit">คำนวณขนาดยาใหม่</button>
          <button type="button" class="ghost" onclick="document.getElementById('doseForm').reset()">รีเซ็ต</button>
          <button type="button" class="ghost" onclick="window.print()">ดาวน์โหลด PDF / พิมพ์</button>
        </div>
      </form>
    </section>

    <section id="results" class="card" style="display:none">
      <div class="results">
        <div class="result-head">
          <div>
            <div class="small">ขนาดยาใหม่ต่อสัปดาห์ (ช่วง)</div>
            <h2 id="newDoseText">-</h2>
            <div id="advice" class="small"></div>
          </div>
          <div style="text-align:right">
            <div class="small">เม็ดยาที่เลือก</div>
            <div style="margin-top:6px">
              <span class="pill pill-3">3 mg</span>
              <span class="pill pill-2">2 mg</span>
            </div>
          </div>
        </div>

        <div>
          <h3 style="margin:10px 0 6px">แผนการให้ยา 7 วัน (ต่ำสุด)</h3>
          <table class="plan-table" id="planMin">
            <thead>
              <tr><th>วัน</th><th>3 mg (เม็ด)</th><th>2 mg (เม็ด)</th><th>รวม mg</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div>
          <h3 style="margin:10px 0 6px">แผนการให้ยา 7 วัน (เฉลี่ย)</h3>
          <table class="plan-table" id="planAvg">
            <thead>
              <tr><th>วัน</th><th>3 mg (เม็ด)</th><th>2 mg (เม็ด)</th><th>รวม mg</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div>
          <h3 style="margin:10px 0 6px">แผนการให้ยา 7 วัน (สูงสุด)</h3>
          <table class="plan-table" id="planMax">
            <thead>
              <tr><th>วัน</th><th>3 mg (เม็ด)</th><th>2 mg (เม็ด)</th><th>รวม mg</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div>
          <h3 style="margin:10px 0 6px">สรุปการจ่ายยาสำหรับช่วงนัด</h3>
          <div id="supplySummary" class="small"></div>
        </div>

      </div>
    </section>
  </main>

  <footer class="small">คู่มือ: ใช้เป็นแนวทางเท่านั้น หากมีเลือดออกรุนแรง ให้รีบพบแพทย์</footer>

  <script src="script.js"></script>
</body>
</html>
