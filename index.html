<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏¢‡∏≤ Warfarin ‡∏´‡πâ‡∏≠‡∏á‡∏¢‡∏≤‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏û‡∏∏‡∏ô‡∏û‡∏¥‡∏ô</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#E0F7FA; /* ‡∏ü‡πâ‡∏≤‡∏≠‡∏°‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô ‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô */
  --card:#FFFFFF;
  --accent:#26A69A; /* teal ‡∏™‡∏î‡πÉ‡∏™ */
  --accent-light:#B2DFDB;
  --muted:#546E7A;
  --highlight:#80CBC4;
  font-family: 'Kanit', sans-serif;
}
body{
  background:linear-gradient(180deg,var(--bg),#FFFFFF);
  margin:0;
  padding:20px;
  color:#263238;
}
body::before{
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('logo1.gif') center center no-repeat;
  background-size: 380px auto;
  opacity: 0.06;
  z-index: -1;
}
header{display:flex;align-items:center;gap:12px}
h1{margin:0;font-size:20px;text-align:center;flex:1;color:var(--accent)}
.container{max-width:980px;margin:20px auto}
.card{background:var(--card);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,0.08);padding:18px;margin-bottom:16px;border-top:4px solid var(--highlight)}
label{display:block;font-size:14px;margin-bottom:6px;color:var(--muted)}
input[type=number]{width:100%;padding:10px;border-radius:10px;border:1px solid #cfd8dc;font-size:16px;background:#FAFAFA;}
.row{display:flex;gap:12px}
.col{flex:1}
.radio-row{display:flex;gap:10px;flex-wrap:wrap}
.pill{padding:8px 14px;border-radius:20px;border:1px solid #B2DFDB;background:#E0F2F1;cursor:pointer;transition:all 0.2s ease}
.pill:hover{background:var(--highlight);color:#004D40}
button.primary{background:var(--accent);color:#fff;border:0;padding:12px 20px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease}
button.primary:hover{background:#00796B}
.result{margin-top:12px}
table{width:100%;border-collapse:collapse;border-radius:10px;overflow:hidden}
th,td{padding:8px;border-bottom:1px solid #E0F2F1;text-align:center}
th{background:var(--accent-light);color:#004D40}
.small{font-size:13px;color:var(--muted)}
.note{background:#E0F2F1;padding:10px;border-radius:10px;margin-top:8px;white-space:pre-line;color:#004D40}
footer{font-size:13px;color:var(--muted);text-align:center;padding:8px}
@media(max-width:720px){.row{flex-direction:column}}
</style>
</head>
<body>
<div class="container">
<header class="card" style="align-items:center">
<h1>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏¢‡∏≤ Warfarin ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏û‡∏∏‡∏ô‡∏û‡∏¥‡∏ô</h1>
</header>

<section class="card">
<form id="form">
  <div class="row">
    <div class="col">
      <label>INR ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
      <input type="number" step="0.01" id="inr" min="0" value="2.5" required>
    </div>
    <div class="col">
      <label>‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Warfarin ‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå (mg)</label>
      <input type="number" step="0.1" id="weeklyDose" min="0" value="35" required>
    </div>
    <div class="col">
      <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î (‡∏ß‡∏±‡∏ô)</label>
      <input type="number" id="days" min="1" value="7" required>
    </div>
  </div>

  <div style="margin-top:12px">
    <label>‡∏ä‡∏ô‡∏¥‡∏î‡πÄ‡∏°‡πá‡∏î‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</label>
    <div class="radio-row">
      <label class="pill"><input type="radio" name="pills" value="3" checked> ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡πá‡∏î 3 mg ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</label>
      <label class="pill"><input type="radio" name="pills" value="2"> ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡πá‡∏î 2 mg ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</label>
      <label class="pill"><input type="radio" name="pills" value="both"> ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á 2 ‡πÅ‡∏•‡∏∞ 3 mg</label>
    </div>
  </div>

  <div style="margin-top:12px">
    <label>‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å</label>
    <div class="radio-row">
      <label class="pill"><input type="radio" name="bleed" value="no" checked> ‡πÑ‡∏°‡πà‡∏°‡∏µ</label>
      <label class="pill"><input type="radio" name="bleed" value="yes"> ‡∏°‡∏µ</label>
    </div>
  </div>
</form>

<div id="results" class="result" style="display:none"></div>
</section>

<section id="tables" class="card" style="display:none">
<h3 style="color:var(--accent)">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏¢‡∏≤ (7 ‡∏ß‡∏±‡∏ô)</h3>
<div id="plans"></div>
<div style="margin-top:12px;text-align:right">
  <button onclick="window.print()" class="primary">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î / ‡∏û‡∏¥‡∏°‡∏û‡πå (PDF)</button>
</div>
</section>

<footer class="card small">‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤ ‡πÄ‡πÄ‡∏û‡∏ó‡∏¢‡πå/‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</footer>
</div>

<script>
function roundHalf(x){return Math.round(x*2)/2}

function distributeEvenly7(total){
  const base = Math.floor(total/7);
  let arr = Array(7).fill(base);
  let rem = total - base*7;
  for(let i=0;i<rem;i++) arr[i]++;
  return arr;
}

function findBestCombo(target){
    const numSets = Math.round(target / 5);
    const h3 = numSets;
    const h2 = numSets;
    const total = h3*3 + h2*2;
    return {h3:h3, h2:h2, total:total};
}

function buildPlan5mg(title, combo, weeklyDose){
    const perDay3 = distributeEvenly7(combo.h3);
    const perDay2 = distributeEvenly7(combo.h2);
    const totalWeekly = combo.h3*3 + combo.h2*2;
    const diffWeekPct = weeklyDose===0?0:((totalWeekly-weeklyDose)/weeklyDose)*100;
    let html = `<h4>${title} ‚Äî ‡∏£‡∏ß‡∏° ${totalWeekly.toFixed(2)} mg/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå (${diffWeekPct>0?'+':''}${diffWeekPct.toFixed(2)}% ‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°)</h4>`;
    html += `<table><thead><tr><th>‡∏ß‡∏±‡∏ô</th><th>3 mg (‡πÄ‡∏°‡πá‡∏î)</th><th>2 mg (‡πÄ‡∏°‡πá‡∏î)</th><th>‡∏£‡∏ß‡∏° (mg)</th></tr></thead><tbody>`;
    const dayNames = ['‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå','‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£','‡∏û‡∏∏‡∏ò','‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ','‡∏®‡∏∏‡∏Å‡∏£‡πå','‡πÄ‡∏™‡∏≤‡∏£‡πå','‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå'];
    for(let i=0;i<7;i++){
        const t3 = perDay3[i];
        const t2 = perDay2[i];
        const mg = t3*3 + t2*2;
        html += `<tr><td>${dayNames[i]}</td><td>${t3}</td><td>${t2}</td><td>${mg.toFixed(2)}</td></tr>`;
    }
    html += `</tbody></table>`;
    return html;
}

function buildPlanHTML(title, combo, pctText){
  const perDay3 = distributeEvenly7(combo.h3);
  const perDay2 = distributeEvenly7(combo.h2);
  const total = combo.total;
  let html = `<h4>${title} ‚Äî ‡∏£‡∏ß‡∏° ${total.toFixed(2)} mg/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ${pctText ? `(${pctText})` : ''}</h4>`;
  html += `<table><thead><tr><th>‡∏ß‡∏±‡∏ô</th><th>3 mg (‡πÄ‡∏°‡πá‡∏î)</th><th>2 mg (‡πÄ‡∏°‡πá‡∏î)</th><th>‡∏£‡∏ß‡∏° (mg)</th></tr></thead><tbody>`;
  const dayNames = ['‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå','‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£','‡∏û‡∏∏‡∏ò','‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ','‡∏®‡∏∏‡∏Å‡∏£‡πå','‡πÄ‡∏™‡∏≤‡∏£‡πå','‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå'];
  for(let i=0;i<7;i++){
    const t3 = perDay3[i]/2;
    const t2 = perDay2[i]/2;
    const mg = t3*3 + t2*2;
    html += `<tr><td>${dayNames[i]}</td><td>${t3 % 1 === 0 ? t3 : t3.toFixed(2)}</td><td>${t2 % 1 === 0 ? t2 : t2.toFixed(2)}</td><td>${mg.toFixed(2)}</td></tr>`;
  }
  html += `</tbody></table>`;
  return html;
}

function calculate(){
  const inr = parseFloat(document.getElementById('inr').value);
  const weeklyDose = parseFloat(document.getElementById('weeklyDose').value);
  const pillChoice = document.querySelector('input[name="pills"]:checked').value;
  const bleed = document.querySelector('input[name="bleed"]:checked').value;
  if(isNaN(inr)||isNaN(weeklyDose)) return;

  const resDiv = document.getElementById('results');
  const tables = document.getElementById('tables');
  const plansDiv = document.getElementById('plans');

  if(bleed==='yes'){
    resDiv.innerHTML = `<div class="card"><p><strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> ‡∏û‡∏ö‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å: ‡πÉ‡∏´‡πâ Vit K1 ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏â‡∏µ‡∏¢‡∏ö‡∏û‡∏•‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå</p></div>`;
    resDiv.style.display='block';
    tables.style.display='none';
    plansDiv.innerHTML='';
    return;
  }

  let adj = {minPct:0,maxPct:0,avgPct:0,note:''};
  if(inr < 1.5){adj.minPct=0.10;adj.maxPct=0.20;adj.avgPct=0.15;adj.note='‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 10‚Äì20%';}
  else if(inr>=1.5 && inr<=1.9){adj.minPct=0.05;adj.maxPct=0.10;adj.avgPct=0.075;adj.note='‡πÄ‡∏û‡∏¥‡πà‡∏° 5‚Äì10% ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° INR ‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô';}
  else if(inr>=2.0 && inr<=3.0){adj.minPct=0;adj.maxPct=0;adj.avgPct=0;adj.note='‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏¢‡∏≤';}
  else if(inr>=3.1 && inr<=3.9){adj.minPct=-0.10;adj.maxPct=-0.05;adj.avgPct=-0.075;adj.note='‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 5‚Äì10%';}
  else if(inr>3.9 && inr<5.0){adj.minPct=-0.10;adj.maxPct=-0.10;adj.avgPct=-0.10;adj.note='‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤ 1 ‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏•‡∏î‡∏•‡∏á 10%';}
  else if(inr>=5.0 && inr<9.0){adj.minPct=-0.20;adj.maxPct=-0.20;adj.avgPct=-0.20;adj.note='‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤ 2 ‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏•‡∏î‡∏•‡∏á 20% ‚Äî ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏´‡πâ Vitamin K‚ÇÅ';}
  else if(inr>=9.0){adj.minPct=null;adj.maxPct=null;adj.avgPct=null;adj.note='INR > 9.0: ‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤ ‡πÉ‡∏´‡πâ Vitamin K‚ÇÅ 2.5‚Äì5 mg ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° INR ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏¥‡∏î';}

  let newRange = {};
  if(adj.minPct===null){ 
    newRange.note = '‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö INR >= 9.0 ‚Äî ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô'; 
  } else{
    const min = weeklyDose*(1+adj.minPct);
    const max = weeklyDose*(1+adj.maxPct);
    const avg = weeklyDose*(1+adj.avgPct);
    newRange = {
      minCalc: parseFloat(min.toFixed(2)),
      maxCalc: parseFloat(max.toFixed(2)),
      avgCalc: parseFloat(avg.toFixed(2)),
      min: roundHalf(min*2)/2,
      max: roundHalf(max*2)/2,
      avg: roundHalf(avg*2)/2
    };
  }

  let html = `<div class="card"><p><strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> INR = ${inr.toFixed(2)} ‚Äî ${adj.note}</p>`;
  if(newRange.note) html += `<p class="note">${newRange.note}</p>`; 
  else html += `<p>‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå (mg) : <strong>${newRange.minCalc.toFixed(2)} ‚Äî ${newRange.maxCalc.toFixed(2)}</strong> (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ${newRange.avgCalc.toFixed(2)} mg)</p>`;
  html += `</div>`;
  resDiv.innerHTML = html; 
  resDiv.style.display='block';

  plansDiv.innerHTML='';

  if(newRange.min!==undefined){
    const targets = [
       {k:'‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î', val:newRange.min, pct:adj.minPct},
       {k:'‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢', val:newRange.avg, pct:adj.avgPct},
       {k:'‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î', val:newRange.max, pct:adj.maxPct}
    ];

    const numDays = parseInt(document.getElementById('days').value);

    targets.forEach(t=>{
      let best;
      if(pillChoice==='3'){
        const h3=Math.round(t.val/1.5);
        best={h3:h3,h2:0,total:h3*1.5,type:'3mg'};
      } else if(pillChoice==='2'){
        const h2=Math.round(t.val/1.0);
        best={h3:0,h2:h2,total:h2*1.0,type:'2mg'};
      } else {
        best=findBestCombo(t.val);
        best.type='5mg';
      }

      let planHTML = '';
      if(best.type==='5mg'){
        planHTML += buildPlan5mg(t.k,best,weeklyDose);
      } else {
        planHTML += buildPlanHTML(t.k,best,((best.total-weeklyDose)/weeklyDose*100).toFixed(2)+'%');
      }

      // üîß ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏°‡πá‡∏î‡∏¢‡∏≤‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î
      let total3 = 0, total2 = 0;
      const perDay3 = distributeEvenly7(best.h3);
      const perDay2 = distributeEvenly7(best.h2);

      for(let i=0; i<numDays; i++){
          if(best.type==='5mg'){
              total3 += perDay3[i % 7];
              total2 += perDay2[i % 7];
          } else if(best.type==='3mg'){
              total3 += perDay3[i % 7]/2;
          } else if(best.type==='2mg'){
              total2 += perDay2[i % 7]/2;
          }
      }

      total3 = Math.ceil(total3);
      total2 = Math.ceil(total2);

      let noteText = `‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏°‡πá‡∏î‡∏¢‡∏≤ (${numDays} ‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î)\n`;
      if(total3>0) noteText += `‡∏£‡∏ß‡∏° 3 mg: ${total3} ‡πÄ‡∏°‡πá‡∏î\n`;
      if(total2>0) noteText += `‡∏£‡∏ß‡∏° 2 mg: ${total2} ‡πÄ‡∏°‡πá‡∏î`;

      if(noteText) planHTML += `<div class="note" style="white-space:pre-line">${noteText}</div>`;

      plansDiv.innerHTML += planHTML;
    });

    tables.style.display='block';
  } else {
    plansDiv.innerHTML=`<div class="note">${newRange.note}</div>`;
    tables.style.display='block';
  }
}

document.querySelectorAll('input[name="pills"]').forEach(el=>el.addEventListener('change',calculate));
document.querySelectorAll('input[name="bleed"]').forEach(el=>el.addEventListener('change',calculate));
document.getElementById('inr').addEventListener('input',calculate);
document.getElementById('weeklyDose').addEventListener('input',calculate);
document.getElementById('days').addEventListener('input',calculate);

calculate();
</script>
</body>
</html>
